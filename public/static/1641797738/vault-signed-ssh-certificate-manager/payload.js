__NUXT_JSONP__("/vault-signed-ssh-certificate-manager", (function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T){return {data:[{}],fetch:{"Index:0":{article:{slug:"vault-signed-ssh-certificate-manager",description:B,title:"How to Use Vault Signed SSH Certificate Manager",author:"hakan",category:"tools",tags:["vault",F,"manager","certificate"],thumbnail:"vault-signed-ssh-certificate-manager.jpg",isPublished:true,createdAt:"2021-06-24T00:00:00.000Z",toc:[{id:G,depth:q,text:H},{id:I,depth:q,text:J},{id:K,depth:q,text:L},{id:M,depth:q,text:N},{id:O,depth:q,text:P}],body:{type:Q,children:[{type:b,tag:l,props:{},children:[{type:a,value:B}]},{type:a,value:c},{type:a,value:c},{type:b,tag:s,props:{id:G},children:[{type:b,tag:r,props:{href:"#introduction",ariaHidden:t,tabIndex:u},children:[{type:b,tag:d,props:{className:[v,w,x]},children:[]}]},{type:a,value:H}]},{type:a,value:c},{type:b,tag:l,props:{},children:[{type:a,value:"Vault is a popular secret manager from Hashicorp. Using a Signed certificate to SSH\nto your server adds another layer of security. I created\n"},{type:b,tag:"strong",props:{},children:[{type:b,tag:r,props:{href:"https:\u002F\u002Fgithub.com\u002Fomegion\u002Fvault-ssh",rel:["nofollow","noopener","noreferrer"],target:"_blank"},children:[{type:a,value:"Vault Signed SSH Certificate Manager"}]}]},{type:a,value:" to allow other developers to\nSSH servers more securely."}]},{type:a,value:c},{type:b,tag:s,props:{id:I},children:[{type:b,tag:r,props:{href:"#prerequisites",ariaHidden:t,tabIndex:u},children:[{type:b,tag:d,props:{className:[v,w,x]},children:[]}]},{type:a,value:J}]},{type:a,value:c},{type:b,tag:l,props:{},children:[{type:a,value:"Before you get started, you will need to have a number of things."}]},{type:a,value:c},{type:b,tag:m,props:{},children:[{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:"Running Vault server"}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:s,props:{id:K},children:[{type:b,tag:r,props:{href:"#installing-ssh-manager-binary",ariaHidden:t,tabIndex:u},children:[{type:b,tag:d,props:{className:[v,w,x]},children:[]}]},{type:a,value:L}]},{type:a,value:c},{type:b,tag:l,props:{},children:[{type:a,value:"In order to be able to run "},{type:b,tag:f,props:{},children:[{type:a,value:"ssh-manager"}]},{type:a,value:", we need to install the binary to the\nlocal machine. For this, run the following go command to get the package."}]},{type:a,value:c},{type:b,tag:g,props:{className:[h]},children:[{type:b,tag:i,props:{className:[j,k]},children:[{type:b,tag:f,props:{},children:[{type:a,value:"go get -u github.com\u002Fomegion\u002Fvault-ssh\n"}]}]}]},{type:a,value:c},{type:b,tag:l,props:{},children:[{type:a,value:"Let's test that the binary is working:"}]},{type:a,value:c},{type:b,tag:g,props:{className:[h]},children:[{type:b,tag:i,props:{className:[j,k]},children:[{type:b,tag:f,props:{},children:[{type:a,value:"vault-ssh --help\n"}]}]}]},{type:a,value:c},{type:b,tag:l,props:{},children:[{type:a,value:"If everything went well, you will see the CLI help as below:"}]},{type:a,value:c},{type:b,tag:g,props:{className:[h]},children:[{type:b,tag:i,props:{className:[j,k]},children:[{type:b,tag:f,props:{},children:[{type:a,value:"‚ùØ vault-ssh --help\nCLI "},{type:b,tag:d,props:{className:[e,o,p]},children:[{type:a,value:C}]},{type:a,value:" to manage SSH connections with Vault\n\nUsage:\n  vault-ssh "},{type:b,tag:d,props:{className:[e,y]},children:[{type:a,value:"["}]},{type:a,value:C},{type:b,tag:d,props:{className:[e,y]},children:[{type:a,value:"]"}]},{type:a,value:"\n\nAvailable Commands:\n  certificate Manages certificates "},{type:b,tag:d,props:{className:[e,z]},children:[{type:a,value:A}]},{type:a,value:" SSH engine.\n  "},{type:b,tag:d,props:{className:[e,o,p]},children:[{type:a,value:R}]},{type:a,value:"      Enables SSH Engine.\n  "},{type:b,tag:d,props:{className:[e,o,p]},children:[{type:a,value:S}]},{type:a,value:"        Help about any "},{type:b,tag:d,props:{className:[e,o,p]},children:[{type:a,value:C}]},{type:a,value:"\n  role        Manages roles "},{type:b,tag:d,props:{className:[e,z]},children:[{type:a,value:A}]},{type:a,value:" SSH engine.\n  sign        Signs given public key with SSH engine and role.\n  version     Print the version\u002Fbuild number\n\nFlags:\n  -h, --help   "},{type:b,tag:d,props:{className:[e,o,p]},children:[{type:a,value:S}]},{type:a,value:D},{type:b,tag:d,props:{className:[e,z]},children:[{type:a,value:A}]},{type:a,value:" vault-ssh\n\nUse "},{type:b,tag:d,props:{className:[e,"string"]},children:[{type:a,value:"\"vault-ssh [command] --help\""}]},{type:a,value:D},{type:b,tag:d,props:{className:[e,z]},children:[{type:a,value:A}]},{type:a,value:D},{type:b,tag:d,props:{className:[e,T]},children:[{type:a,value:"more"}]},{type:a,value:" information about a command.\n"}]}]}]},{type:a,value:c},{type:b,tag:s,props:{id:M},children:[{type:b,tag:r,props:{href:"#create-ssh-engine-and-role",ariaHidden:t,tabIndex:u},children:[{type:b,tag:d,props:{className:[v,w,x]},children:[]}]},{type:a,value:N}]},{type:a,value:c},{type:b,tag:m,props:{},children:[{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:"Enable a SSH engine in your Vault."}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:g,props:{className:[h]},children:[{type:b,tag:i,props:{className:[j,k]},children:[{type:b,tag:f,props:{},children:[{type:a,value:"vault-ssh "},{type:b,tag:d,props:{className:[e,o,p]},children:[{type:a,value:R}]},{type:a,value:" --path my-ssh-signer\n"}]}]}]},{type:a,value:c},{type:b,tag:m,props:{start:q},children:[{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:"Generate a Certificate CA for the engine."}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:g,props:{className:[h]},children:[{type:b,tag:i,props:{className:[j,k]},children:[{type:b,tag:f,props:{},children:[{type:a,value:"vault-ssh certificate create --engine my-ssh-signer\n"}]}]}]},{type:a,value:c},{type:b,tag:m,props:{start:3},children:[{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:"Read created certificate to put on your server."}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:g,props:{className:[h]},children:[{type:b,tag:i,props:{className:[j,k]},children:[{type:b,tag:f,props:{},children:[{type:a,value:"vault-ssh certificate "},{type:b,tag:d,props:{className:[e,o,p]},children:[{type:a,value:"read"}]},{type:a,value:" --engine my-ssh-signer\n"}]}]}]},{type:a,value:c},{type:b,tag:m,props:{start:4},children:[{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:"Create a role for the engine."}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:g,props:{className:[h]},children:[{type:b,tag:i,props:{className:[j,k]},children:[{type:b,tag:f,props:{},children:[{type:a,value:"vault-ssh role create --name omegion --engine my-ssh-signer\n"}]}]}]},{type:a,value:c},{type:b,tag:m,props:{start:5},children:[{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:"Sign your public key with a role. The generated file will be written in "},{type:b,tag:f,props:{},children:[{type:a,value:"signed-key.pub"}]},{type:a,value:" in this example."}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:g,props:{className:[h]},children:[{type:b,tag:i,props:{className:[j,k]},children:[{type:b,tag:f,props:{},children:[{type:a,value:"vault-ssh sign "},{type:b,tag:d,props:{className:[e,y]},children:[{type:a,value:E}]},{type:a,value:"\n  --role omegion "},{type:b,tag:d,props:{className:[e,y]},children:[{type:a,value:E}]},{type:a,value:"\n  --engine my-ssh-signer "},{type:b,tag:d,props:{className:[e,y]},children:[{type:a,value:E}]},{type:a,value:"\n  --public-key ~\u002F.ssh\u002Fid_rsa.pub "},{type:b,tag:d,props:{className:[e,"operator"]},children:[{type:a,value:"\u003E"}]},{type:a,value:" signed-key.pub\n"}]}]}]},{type:a,value:c},{type:b,tag:m,props:{start:6},children:[{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:"SSH your server with signed key."}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:g,props:{className:[h]},children:[{type:b,tag:i,props:{className:[j,k]},children:[{type:b,tag:f,props:{},children:[{type:b,tag:d,props:{className:[e,T]},children:[{type:a,value:F}]},{type:a,value:" -i signed-key.pub -i ~\u002F.ssh\u002Fid_rsa root@1.1.1.1\n"}]}]}]},{type:a,value:c},{type:b,tag:s,props:{id:O},children:[{type:b,tag:r,props:{href:"#conclusion",ariaHidden:t,tabIndex:u},children:[{type:b,tag:d,props:{className:[v,w,x]},children:[]}]},{type:a,value:P}]},{type:a,value:c},{type:b,tag:l,props:{},children:[{type:a,value:"In this tutorial, we enabled SSH engine in Vault, then we generated CA certificate.\nWe used the generated CA certificate to the server we want to SSH. Also, we created\na role in Vault within the created engine with static configuration. Finally,\nwe signed our SSH key with Vault then used a temporary CA certificate to SSH to\nthe server."}]}]},excerpt:{type:Q,children:[{type:b,tag:l,props:{},children:[{type:a,value:B}]}]},dir:"\u002Farticles",path:"\u002Farticles\u002Fvault-signed-ssh-certificate-manager",extension:".md",updatedAt:"2022-01-10T06:54:04.967Z",readingTime:115800},fetchState:{error:null,pending:false,timestamp:1641797741042}}},mutations:void 0}}("text","element","\n","span","token","code","div","nuxt-content-highlight","pre","language-shell","line-numbers","p","ol","li","builtin","class-name",2,"a","h2","true",-1,"mdi","mdi-24px","mdi-link-variant","punctuation","keyword","for","A tool to use Vault Signed SSH Certificate Manager to SSH your server.","command"," ","\\","ssh","introduction","Introduction","prerequisites","Prerequisites","installing-ssh-manager-binary","Installing SSH Manager Binary","create-ssh-engine-and-role","Create SSH engine and role.","conclusion","Conclusion","root","enable","help","function")));