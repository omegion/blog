__NUXT_JSONP__("/how-to-run-nuxt-on-kubernetes-1", (function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_,$,aa,ab,ac,ad,ae,af,ag,ah,ai,aj,ak,al,am,an,ao,ap,aq,ar,as,at,au,av,aw,ax,ay,az){return {data:[{}],fetch:{"Index:0":{article:{slug:"how-to-run-nuxt-on-kubernetes-1",description:G,title:"How to deploy Nuxt JS on Kubernetes Cluster (Part 1)",author:"hakan",category:O,tags:["nuxt.js","vue",O,"k8s","deployment","deploy"],thumbnail:"how-to-run-nuxt-on-kubernetes.jpg",isPublished:true,createdAt:"2021-03-19T00:00:00.000Z",toc:[{id:P,depth:z,text:Q},{id:R,depth:z,text:S},{id:T,depth:z,text:U},{id:V,depth:H,text:W},{id:X,depth:z,text:Y},{id:Z,depth:H,text:_},{id:$,depth:H,text:aa},{id:ab,depth:z,text:ac}],body:{type:ad,children:[{type:b,tag:g,props:{},children:[{type:a,value:G}]},{type:a,value:e},{type:a,value:e},{type:b,tag:A,props:{id:P},children:[{type:b,tag:k,props:{href:"#introduction",ariaHidden:m,tabIndex:n},children:[{type:b,tag:c,props:{className:[o,p,q]},children:[]}]},{type:a,value:Q}]},{type:a,value:e},{type:b,tag:g,props:{},children:[{type:a,value:"Kubernetes is a fully managed container ..."}]},{type:a,value:e},{type:b,tag:g,props:{},children:[{type:a,value:"I am a big fan of Nuxt.js, recently created my personal blog where you read this post. I decided to host my personal blog Nuxt.js application on my self-managed Kubernetes cluster. On the way of deployment, I gained quite an amount of experience how to containerize a Nuxt.js application."}]},{type:a,value:e},{type:b,tag:g,props:{},children:[{type:a,value:"Since Nuxt.js supports full static application, our Nuxt.js application will be around "},{type:b,tag:i,props:{},children:[{type:a,value:"50MB"}]},{type:a,value:", which is great!"}]},{type:a,value:e},{type:b,tag:A,props:{id:R},children:[{type:b,tag:k,props:{href:"#prerequisites",ariaHidden:m,tabIndex:n},children:[{type:b,tag:c,props:{className:[o,p,q]},children:[]}]},{type:a,value:S}]},{type:a,value:e},{type:b,tag:g,props:{},children:[{type:a,value:"Before you get started, you will need to have a number of things."}]},{type:a,value:e},{type:b,tag:"ol",props:{},children:[{type:a,value:e},{type:b,tag:"li",props:{},children:[{type:b,tag:i,props:{},children:[{type:a,value:I}]}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:A,props:{id:T},children:[{type:b,tag:k,props:{href:"#install-nuxtjs",ariaHidden:m,tabIndex:n},children:[{type:b,tag:c,props:{className:[o,p,q]},children:[]}]},{type:a,value:U}]},{type:a,value:e},{type:b,tag:r,props:{className:[s]},children:[{type:b,tag:t,props:{className:[u,v]},children:[{type:b,tag:i,props:{},children:[{type:b,tag:c,props:{className:[d,B]},children:[{type:a,value:I}]},{type:a,value:" create nuxt-app nuxt-k8s\ncreate-nuxt-app v3.6.0\n✨  Generating Nuxt.js project "},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:"in"}]},{type:a,value:" nuxt-k8s\n? Project name: nuxt-k8s\n? Programming language: TypeScript\n? Package manager: Yarn\n? UI framework: Buefy\n? Nuxt.js modules:\n? Linting tools: "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:C}]},{type:a,value:ae},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:w}]},{type:a,value:af},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:x}]},{type:a,value:ag},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:w}]},{type:a,value:k},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:x}]},{type:a,value:ah},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:w}]},{type:a,value:ai},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:x}]},{type:a,value:aj},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:D}]},{type:a,value:"\n? Testing framework: None\n? Rendering mode: Universal "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:C}]},{type:a,value:"SSR \u002F SSG"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:D}]},{type:a,value:"\n? Deployment target: Static "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:C}]},{type:a,value:"Static\u002FJamstack hosting"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:D}]},{type:a,value:"\n? Development tools: "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:C}]},{type:a,value:ae},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:w}]},{type:a,value:af},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:x}]},{type:a,value:ag},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:w}]},{type:a,value:k},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:x}]},{type:a,value:ah},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:w}]},{type:a,value:ai},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:x}]},{type:a,value:aj},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:D}]},{type:a,value:"\n? What is your GitHub username?\n? Version control system: Git\n"}]}]}]},{type:a,value:e},{type:b,tag:J,props:{id:V},children:[{type:b,tag:k,props:{href:"#running-nuxt-application",ariaHidden:m,tabIndex:n},children:[{type:b,tag:c,props:{className:[o,p,q]},children:[]}]},{type:a,value:W}]},{type:a,value:e},{type:b,tag:g,props:{},children:[{type:a,value:"Now, let's run our application with:"}]},{type:a,value:e},{type:b,tag:r,props:{className:[s]},children:[{type:b,tag:t,props:{className:[u,v]},children:[{type:b,tag:i,props:{},children:[{type:b,tag:c,props:{className:[d,ak,al]},children:[{type:a,value:"cd"}]},{type:a,value:" nuxt-k8s\n"},{type:b,tag:c,props:{className:[d,B]},children:[{type:a,value:I}]},{type:a,value:" run dev\n"}]}]}]},{type:a,value:e},{type:b,tag:g,props:{},children:[{type:a,value:am},{type:b,tag:k,props:{href:"http:\u002F\u002Flocalhost:3000",rel:[an,ao,ap],target:aq},children:[{type:a,value:"localhost:3000"}]},{type:a,value:" you will see the application."}]},{type:a,value:e},{type:b,tag:g,props:{},children:[{type:b,tag:"img",props:{alt:"image",src:"\u002Fpublic\u002Fimg\u002Fnuxt-k8s-screenshot-1.png",title:"Nuxt.js Application Screen"},children:[]}]},{type:a,value:e},{type:b,tag:A,props:{id:X},children:[{type:b,tag:k,props:{href:"#dockerization",ariaHidden:m,tabIndex:n},children:[{type:b,tag:c,props:{className:[o,p,q]},children:[]}]},{type:a,value:Y}]},{type:a,value:e},{type:b,tag:g,props:{},children:[{type:a,value:"Every application that runs on Kubernetes is nothing but a container. So, we need to create "},{type:b,tag:i,props:{},children:[{type:a,value:y}]},{type:a,value:" for our Nuxt.js application. For this tutorial, we will deploy a fully static website. Eventually, Nuxt.js has already a built-in mechanism to generate our static files."}]},{type:a,value:e},{type:b,tag:g,props:{},children:[{type:a,value:"Our "},{type:b,tag:i,props:{},children:[{type:a,value:y}]},{type:a,value:" will have two main stages. The first stage will install dependencies and generate static files, the second stage will serve these static files with "},{type:b,tag:i,props:{},children:[{type:a,value:"Nginx"}]},{type:a,value:ar}]},{type:a,value:e},{type:b,tag:g,props:{},children:[{type:a,value:"Let's create "},{type:b,tag:i,props:{},children:[{type:a,value:y}]},{type:a,value:" in the application codebase."}]},{type:a,value:e},{type:b,tag:r,props:{className:[s]},children:[{type:b,tag:t,props:{className:[u,v]},children:[{type:b,tag:i,props:{},children:[{type:b,tag:c,props:{className:[d,B]},children:[{type:a,value:"touch"}]},{type:a,value:" Dockerfile\n"}]}]}]},{type:a,value:e},{type:b,tag:g,props:{},children:[{type:a,value:"Paste the following content in the created file."}]},{type:a,value:e},{type:b,tag:r,props:{className:[s]},children:[{type:b,tag:c,props:{className:["filename"]},children:[{type:a,value:y}]},{type:b,tag:t,props:{className:[u,"language-docker"]},children:[{type:b,tag:i,props:{},children:[{type:b,tag:c,props:{className:[d,as]},children:[{type:a,value:"# Build Stage"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:at}]},{type:a,value:" node"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:K}]},{type:a,value:"lts"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:h}]},{type:a,value:"alpine as build"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:h}]},{type:a,value:au},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:L}]},{type:a,value:" NODE_ENV=production\n"},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:L}]},{type:a,value:av},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:E}]},{type:a,value:" mkdir "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:h}]},{type:a,value:"p $APP_HOME\n\n"},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aw}]},{type:a,value:" . $APP_HOME\n\n"},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:E}]},{type:a,value:" cd $APP_HOME && yarn install \\\n  "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:h}]},{type:a,value:"prefer"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:h}]},{type:a,value:"offline \\\n  "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:h}]},{type:a,value:"pure"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:h}]},{type:a,value:"lockfile \\\n  "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:h}]},{type:a,value:"non"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:h}]},{type:a,value:"interactive \\\n  "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:h}]},{type:a,value:"production=true\n\n"},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:"WORKDIR"}]},{type:a,value:" $APP_HOME\n\n"},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:E}]},{type:a,value:" yarn run generate\n\n"},{type:b,tag:c,props:{className:[d,as]},children:[{type:a,value:"# Production Stage"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:at}]},{type:a,value:" nginx"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:K}]},{type:a,value:"stable"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:h}]},{type:a,value:"alpine as production"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:h}]},{type:a,value:au},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:L}]},{type:a,value:av},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aw}]},{type:a,value:F},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:h}]},{type:a,value:"from=build"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:h}]},{type:a,value:"stage $APP_HOME\u002Fdist \u002Fusr\u002Fshare\u002Fnginx\u002Fhtml\n\n"},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:E}]},{type:a,value:" chown nginx"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:K}]},{type:a,value:"nginx \u002Fusr\u002Fshare\u002Fnginx\u002Fhtml\n\n"},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:"EXPOSE"}]},{type:a,value:" 80\n\n"},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:"CMD"}]},{type:a,value:F},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:"["}]},{type:b,tag:c,props:{className:[d,M]},children:[{type:a,value:"\"nginx\""}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ax}]},{type:a,value:F},{type:b,tag:c,props:{className:[d,M]},children:[{type:a,value:"\"-g\""}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ax}]},{type:a,value:F},{type:b,tag:c,props:{className:[d,M]},children:[{type:a,value:"\"daemon off;\""}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:"]"}]},{type:a,value:e}]}]}]},{type:a,value:e},{type:b,tag:J,props:{id:Z},children:[{type:b,tag:k,props:{href:"#build-docker-image",ariaHidden:m,tabIndex:n},children:[{type:b,tag:c,props:{className:[o,p,q]},children:[]}]},{type:a,value:_}]},{type:a,value:e},{type:b,tag:g,props:{},children:[{type:a,value:"Once we created our "},{type:b,tag:i,props:{},children:[{type:a,value:y}]},{type:a,value:", now we can good to create our docker image."}]},{type:a,value:e},{type:b,tag:r,props:{className:[s]},children:[{type:b,tag:t,props:{className:[u,v]},children:[{type:b,tag:i,props:{},children:[{type:a,value:"docker build -t nuxt-k8s "},{type:b,tag:c,props:{className:[d,ak,al]},children:[{type:a,value:ar}]},{type:a,value:e}]}]}]},{type:a,value:e},{type:b,tag:g,props:{},children:[{type:a,value:"If everything went well, check the image and its size:"}]},{type:a,value:e},{type:b,tag:r,props:{className:[s]},children:[{type:b,tag:t,props:{className:[u,v]},children:[{type:b,tag:i,props:{},children:[{type:a,value:"❯ docker image "},{type:b,tag:c,props:{className:[d,B]},children:[{type:a,value:"ls"}]},{type:a,value:"                 \nREPOSITORY   TAG       IMAGE ID       CREATED          SIZE\nnuxt-k8s     latest    c8c54ee0d07f   "},{type:b,tag:c,props:{className:[d,N]},children:[{type:a,value:"15"}]},{type:a,value:" minutes ago   "},{type:b,tag:c,props:{className:[d,N]},children:[{type:a,value:"23"}]},{type:a,value:".7MB\n\n"}]}]}]},{type:a,value:e},{type:b,tag:g,props:{},children:[{type:a,value:"As we generate only static files of our application, we only need to put generated files to the docker image."}]},{type:a,value:e},{type:b,tag:J,props:{id:$},children:[{type:b,tag:k,props:{href:"#test-docker-image",ariaHidden:m,tabIndex:n},children:[{type:b,tag:c,props:{className:[o,p,q]},children:[]}]},{type:a,value:aa}]},{type:a,value:e},{type:b,tag:g,props:{},children:[{type:a,value:"Now, let's test the docker image if it can render our Nuxt.js application."}]},{type:a,value:e},{type:b,tag:r,props:{className:[s]},children:[{type:b,tag:t,props:{className:[u,v]},children:[{type:b,tag:i,props:{},children:[{type:a,value:"docker run -ti -p "},{type:b,tag:c,props:{className:[d,N]},children:[{type:a,value:"3001"}]},{type:a,value:":80 nuxt-k8s\n"}]}]}]},{type:a,value:e},{type:b,tag:g,props:{},children:[{type:a,value:am},{type:b,tag:k,props:{href:"http:\u002F\u002Flocalhost:3001",rel:[an,ao,ap],target:aq},children:[{type:a,value:"localhost:3001"}]},{type:a,value:", you will access your built application."}]},{type:a,value:e},{type:b,tag:A,props:{id:ab},children:[{type:b,tag:k,props:{href:"#conclusion",ariaHidden:m,tabIndex:n},children:[{type:b,tag:c,props:{className:[o,p,q]},children:[]}]},{type:a,value:ac}]},{type:a,value:e},{type:b,tag:g,props:{},children:[{type:a,value:"In this tutorial, we created Nuxt.js with Buefy CSS framework. Then, we could create a "},{type:b,tag:i,props:{},children:[{type:a,value:y}]},{type:a,value:" with multiple stages which enabled us to reduce an enormous amount of space of the docker image. Finally, we could build and test our docker image."}]},{type:a,value:e},{type:b,tag:g,props:{},children:[{type:a,value:"I am going to continue this tutorial series on the "},{type:b,tag:ay,props:{to:az},children:[{type:a,value:"next article"}]},{type:a,value:". We will be deploying our Nuxt.js application on the Kubernetes cluster."}]},{type:a,value:e},{type:b,tag:ay,props:{to:az},children:[{type:a,value:"\nHow to deploy Nuxt JS on Kubernetes Cluster 2\n"}]}]},excerpt:{type:ad,children:[{type:b,tag:g,props:{},children:[{type:a,value:G}]}]},dir:"\u002Farticles",path:"\u002Farticles\u002Fhow-to-run-nuxt-on-kubernetes-1",extension:".md",updatedAt:"2022-01-09T13:05:34.247Z",readingTime:171600},fetchState:{error:null,pending:false,timestamp:1641733612625}}},mutations:void 0}}("text","element","span","token","\n","punctuation","p","-","code","keyword","a","operator","true",-1,"mdi","mdi-24px","mdi-link-variant","div","nuxt-content-highlight","pre","line-numbers","language-shell","\u003C","\u003E","Dockerfile",2,"h2","function","(",")","RUN"," ","A tutorial about dockerizing Nuxt.js application to be deployed on Kubernetes cluster in minutes.",3,"yarn","h3",":","ENV","string","number","kubernetes","introduction","Introduction","prerequisites","Prerequisites","install-nuxtjs","Install Nuxt.js","running-nuxt-application","Running Nuxt Application","dockerization","Dockerization","build-docker-image","Build Docker Image","test-docker-image","Test Docker Image","conclusion","Conclusion","root","Press ","space"," to select, "," to toggle all, ","i"," to invert selection","builtin","class-name","If you access ","nofollow","noopener","noreferrer","_blank",".","comment","FROM","stage\n\n"," APP_HOME=\u002Fusr\u002Fsrc\u002Fapp\n\n","COPY",",","nuxt-link","\u002Fhow-to-run-nuxt-on-kubernetes-2")));