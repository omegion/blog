__NUXT_JSONP__("/database-backup-with-kubernetes-cron-job", (function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_,$,aa,ab,ac,ad,ae){return {data:[{}],fetch:{"Index:0":{article:{slug:"database-backup-with-kubernetes-cron-job",description:E,title:"Database Backup with Kubernetes Cron Job",author:"hakan",category:M,tags:["database",N,"postgresql",M,"k8s"],thumbnail:"pexels-brett-sayles-4425157.jpg",isPublished:true,createdAt:"2021-02-16T00:00:00.000Z",toc:[{id:O,depth:y,text:P},{id:Q,depth:y,text:R},{id:S,depth:y,text:T},{id:U,depth:y,text:V},{id:W,depth:X,text:Y},{id:Z,depth:X,text:_},{id:$,depth:y,text:aa}],body:{type:ab,children:[{type:b,tag:n,props:{},children:[{type:a,value:E}]},{type:a,value:k},{type:a,value:k},{type:b,tag:z,props:{id:O},children:[{type:b,tag:s,props:{ariaHidden:t,href:"#introduction",tabIndex:u},children:[{type:b,tag:c,props:{className:[v,w,x]},children:[]}]},{type:a,value:P}]},{type:a,value:k},{type:b,tag:n,props:{},children:[{type:a,value:"If you have a self-managed database for your projects, it is hard to manage the\nbackups. You can use "},{type:b,tag:p,props:{},children:[{type:a,value:"db-backup"}]},{type:a,value:" tool to create a backup on the S3 bucket easily\nwithin your cluster."}]},{type:a,value:k},{type:b,tag:z,props:{id:Q},children:[{type:b,tag:s,props:{ariaHidden:t,href:"#prerequisites",tabIndex:u},children:[{type:b,tag:c,props:{className:[v,w,x]},children:[]}]},{type:a,value:R}]},{type:a,value:k},{type:b,tag:n,props:{},children:[{type:a,value:"Before you get started, you will need to have a number of things."}]},{type:a,value:k},{type:b,tag:"ol",props:{},children:[{type:a,value:k},{type:b,tag:F,props:{},children:[{type:a,value:"A running Kubernetes cluster."}]},{type:a,value:k},{type:b,tag:F,props:{},children:[{type:b,tag:p,props:{},children:[{type:a,value:ac}]},{type:a,value:" installed. If not, you will need it to manage your clusters."}]},{type:a,value:k},{type:b,tag:F,props:{},children:[{type:a,value:"Have a "},{type:b,tag:p,props:{},children:[{type:a,value:"KUBECONFIG"}]},{type:a,value:" file (default location is ~\u002F.kube\u002Fconfig)."}]},{type:a,value:k}]},{type:a,value:k},{type:b,tag:z,props:{id:S},children:[{type:b,tag:s,props:{ariaHidden:t,href:"#what-is-cron-job",tabIndex:u},children:[{type:b,tag:c,props:{className:[v,w,x]},children:[]}]},{type:a,value:T}]},{type:a,value:k},{type:b,tag:n,props:{},children:[{type:a,value:"Kubernetes CronJob is a job that repeats itself with a given schedule. CronJob is a\nperfect fit for creating a database backup for your self-managed database."}]},{type:a,value:k},{type:b,tag:z,props:{id:U},children:[{type:b,tag:s,props:{ariaHidden:t,href:"#create-cronjob",tabIndex:u},children:[{type:b,tag:c,props:{className:[v,w,x]},children:[]}]},{type:a,value:V}]},{type:a,value:k},{type:b,tag:n,props:{},children:[{type:a,value:"Let's create "},{type:b,tag:p,props:{},children:[{type:a,value:ad}]},{type:a,value:" with the given content."}]},{type:a,value:k},{type:b,tag:A,props:{className:[B]},children:[{type:b,tag:c,props:{className:["filename"]},children:[{type:a,value:ad}]},{type:b,tag:C,props:{className:[D,"language-yaml"]},children:[{type:b,tag:p,props:{},children:[{type:b,tag:c,props:{className:[d,f,g]},children:[{type:a,value:"apiVersion"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:" batch\u002Fv1beta1\n"},{type:b,tag:c,props:{className:[d,f,g]},children:[{type:a,value:"kind"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:" CronJob\n"},{type:b,tag:c,props:{className:[d,f,g]},children:[{type:a,value:"metadata"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:G},{type:b,tag:c,props:{className:[d,f,g]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:" database"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:N},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:"job\n  "},{type:b,tag:c,props:{className:[d,f,g]},children:[{type:a,value:"namespace"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:" default\n"},{type:b,tag:c,props:{className:[d,f,g]},children:[{type:a,value:H}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:G},{type:b,tag:c,props:{className:[d,f,g]},children:[{type:a,value:"schedule"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:j},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:"\"0 0 * * *\""}]},{type:a,value:G},{type:b,tag:c,props:{className:[d,f,g]},children:[{type:a,value:"jobTemplate"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:"\n    "},{type:b,tag:c,props:{className:[d,f,g]},children:[{type:a,value:H}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:"\n      "},{type:b,tag:c,props:{className:[d,f,g]},children:[{type:a,value:"template"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:"\n        "},{type:b,tag:c,props:{className:[d,f,g]},children:[{type:a,value:H}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:"\n          "},{type:b,tag:c,props:{className:[d,f,g]},children:[{type:a,value:"restartPolicy"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:" OnFailure\n          "},{type:b,tag:c,props:{className:[d,f,g]},children:[{type:a,value:"containers"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:"\n            "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:j},{type:b,tag:c,props:{className:[d,f,g]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:" db"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:"backup\n              "},{type:b,tag:c,props:{className:[d,f,g]},children:[{type:a,value:"image"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:j},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:"\"ghcr.io\u002Fomegion\u002Fdb-backup:v0.9.0\""}]},{type:a,value:"\n              "},{type:b,tag:c,props:{className:[d,f,g]},children:[{type:a,value:"imagePullPolicy"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:" IfNotPresent\n              "},{type:b,tag:c,props:{className:[d,f,g]},children:[{type:a,value:"args"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:o},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:" s3\n                "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:" export\n                "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:j},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:"host=$DB_HOST\n                "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:j},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:"port=$DB_PORT\n                "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:j},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:"databases=$DATABASE_NAMES\n                "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:j},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:"username=$DB_USER\n                "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:j},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:"password=$DB_PASS\n                "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:j},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:"bucket=$BUCKET_NAME\n              "},{type:b,tag:c,props:{className:[d,f,g]},children:[{type:a,value:"env"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:o},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:j},{type:b,tag:c,props:{className:[d,f,g]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:" DB_HOST\n                  "},{type:b,tag:c,props:{className:[d,f,g]},children:[{type:a,value:q}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:j},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:r}]},{type:a,value:o},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:j},{type:b,tag:c,props:{className:[d,f,g]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:" DB_PORT\n                  "},{type:b,tag:c,props:{className:[d,f,g]},children:[{type:a,value:q}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:j},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:r}]},{type:a,value:o},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:j},{type:b,tag:c,props:{className:[d,f,g]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:" DB_USER\n                  "},{type:b,tag:c,props:{className:[d,f,g]},children:[{type:a,value:q}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:j},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:r}]},{type:a,value:o},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:j},{type:b,tag:c,props:{className:[d,f,g]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:" DB_PASS\n                  "},{type:b,tag:c,props:{className:[d,f,g]},children:[{type:a,value:q}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:j},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:r}]},{type:a,value:o},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:j},{type:b,tag:c,props:{className:[d,f,g]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:" DATABASE_NAMES\n                  "},{type:b,tag:c,props:{className:[d,f,g]},children:[{type:a,value:q}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:j},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:r}]},{type:a,value:o},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:j},{type:b,tag:c,props:{className:[d,f,g]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:" BUCKET_NAME\n                  "},{type:b,tag:c,props:{className:[d,f,g]},children:[{type:a,value:q}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:j},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:r}]},{type:a,value:o},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:j},{type:b,tag:c,props:{className:[d,f,g]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:" AWS_ACCESS_KEY_ID\n                  "},{type:b,tag:c,props:{className:[d,f,g]},children:[{type:a,value:q}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:j},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:r}]},{type:a,value:o},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:j},{type:b,tag:c,props:{className:[d,f,g]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:" AWS_SECRET_ACCESS_KEY\n                  "},{type:b,tag:c,props:{className:[d,f,g]},children:[{type:a,value:q}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:j},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:r}]},{type:a,value:o},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:j},{type:b,tag:c,props:{className:[d,f,g]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:" AWS_REGION\n                  "},{type:b,tag:c,props:{className:[d,f,g]},children:[{type:a,value:q}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:j},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:r}]},{type:a,value:k}]}]}]},{type:a,value:k},{type:b,tag:n,props:{},children:[{type:a,value:"Now, we can create CronJob with "},{type:b,tag:p,props:{},children:[{type:a,value:ac}]},{type:a,value:"."}]},{type:a,value:k},{type:b,tag:A,props:{className:[B]},children:[{type:b,tag:C,props:{className:[D,I]},children:[{type:b,tag:p,props:{},children:[{type:a,value:"kubectl apply -f backup-cronjob.yaml\n"}]}]}]},{type:a,value:k},{type:b,tag:ae,props:{id:W},children:[{type:b,tag:s,props:{ariaHidden:t,href:"#verify-cronjob",tabIndex:u},children:[{type:b,tag:c,props:{className:[v,w,x]},children:[]}]},{type:a,value:Y}]},{type:a,value:k},{type:b,tag:n,props:{},children:[{type:a,value:"Let's verify that the CronJob is created successfully."}]},{type:a,value:k},{type:b,tag:A,props:{className:[B]},children:[{type:b,tag:C,props:{className:[D,I]},children:[{type:b,tag:p,props:{},children:[{type:a,value:"kubectl get cronjob database-backup-job                                             \nNAME                  SCHEDULE    SUSPEND   ACTIVE   LAST SCHEDULE   AGE\ndatabase-backup-job   "},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:K}]},{type:a,value:j},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:K}]},{type:a,value:" * * *   False     "},{type:b,tag:c,props:{className:[d,J]},children:[{type:a,value:K}]},{type:a,value:"        "},{type:b,tag:c,props:{className:[d,L]},children:[{type:a,value:"\u003C"}]},{type:a,value:"none"},{type:b,tag:c,props:{className:[d,L]},children:[{type:a,value:"\u003E"}]},{type:a,value:"          27s\n"}]}]}]},{type:a,value:k},{type:b,tag:ae,props:{id:Z},children:[{type:b,tag:s,props:{ariaHidden:t,href:"#test-cronjob",tabIndex:u},children:[{type:b,tag:c,props:{className:[v,w,x]},children:[]}]},{type:a,value:_}]},{type:a,value:k},{type:b,tag:n,props:{},children:[{type:a,value:"The CronJob that we created will be executed every day. So, let's create a\ntemporary job from the CronJob that we can test our Job."}]},{type:a,value:k},{type:b,tag:A,props:{className:[B]},children:[{type:b,tag:C,props:{className:[D,I]},children:[{type:b,tag:p,props:{},children:[{type:a,value:"kubectl create job --from"},{type:b,tag:c,props:{className:[d,L]},children:[{type:a,value:"="}]},{type:a,value:"cronjob\u002Fdatabase-backup-job database-backup-job-manual-001\n"}]}]}]},{type:a,value:k},{type:b,tag:z,props:{id:$},children:[{type:b,tag:s,props:{ariaHidden:t,href:"#conclusion",tabIndex:u},children:[{type:b,tag:c,props:{className:[v,w,x]},children:[]}]},{type:a,value:aa}]},{type:a,value:k},{type:b,tag:n,props:{},children:[{type:a,value:"In this tutorial, we created a CronJob to create database backups for our\nself-managed database."}]}]},excerpt:{type:ab,children:[{type:b,tag:n,props:{},children:[{type:a,value:E}]}]},dir:"\u002Farticles",path:"\u002Farticles\u002Fdatabase-backup-with-kubernetes-cron-job",extension:".md",updatedAt:"2022-01-09T13:26:17.163Z",readingTime:98100},fetchState:{error:null,pending:false,timestamp:1641734855816}}},mutations:void 0}}("text","element","span","token","punctuation","key","atrule",":","-"," ","\n","name","string","p","\n                ","code","value","\"\"","a","true",-1,"mdi","mdi-24px","mdi-link-variant",2,"h2","div","nuxt-content-highlight","pre","line-numbers","This is a tutorial on how to create a database backup with Kubernetes CronJob.","li","\n  ","spec","language-shell","number","0","operator","kubernetes","backup","introduction","Introduction","prerequisites","Prerequisites","what-is-cron-job","What is Cron Job","create-cronjob","Create CronJob","verify-cronjob",3,"Verify CronJob","test-cronjob","Test CronJob","conclusion","Conclusion","root","kubectl","backup-cronjob.yaml","h3")));