<template>
  <section>
    <portal to="hero">
      <section class="hero is-medium is-primary-light is-overflow-hidden">
        <div class="hero-head">
          <navbar type="is-light" shadow />
          <div class="container section pt-5 pb-0">
            <breadcrumbs :items="breadcrumbs" type="is-primary" />
          </div>
        </div>
        <div class="hero-body gradient-y-sm-primary is-relative">
          <div class="columns is-centered">
            <div class="container column is-6 has-text-centered">
              <p class="title is-size-1 has-text-black">Open Source Projects</p>
              <p class="is-size-5 has-text-black is-opacity-7">
                I like to use open source projects for most of our projects
                <br />
                and love to contribute to the open source community.
              </p>
            </div>
          </div>

          <figure
            class="is-absolute is-hidden-mobile is-shape-secondary z-index-1"
            style="top: 8rem; left: 64rem; width: 20rem"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 150 111"
              fill="none"
              data-src="assets/img/decorations/deco-dots-2.svg"
            >
              <path
                d="M61.1773 84.002C60.8203 86.363 60.4453 88.721 60.1093 91.085C59.4803 95.529 58.1233 99.779 56.6563 103.996C55.9393 106.057 54.6813 106.772 52.6743 106.402C50.5633 106.011 48.3833 103.041 48.7093 100.904C48.8423 100.045 49.1252 99.203 49.3912 98.369C50.2372 95.713 51.2503 93.098 51.9363 90.4C52.7583 87.164 53.2993 83.855 53.9893 80.584C54.1353 79.889 54.2333 79.098 54.6353 78.563C55.1723 77.852 55.6393 76.871 56.8283 76.969C58.0963 77.073 59.2622 77.495 59.7622 78.703C60.4562 80.379 61.2533 82.068 61.1773 84.002Z"
                fill="black"
              ></path>
              <path
                d="M141.808 65.469C141.175 64.913 140.765 64.834 140.042 65.067C138.253 65.641 136.833 65.012 135.747 63.468C135.179 62.658 134.886 61.828 135.233 60.776C136.061 58.276 136.837 55.756 137.532 53.217C138.227 50.677 138.796 48.102 139.428 45.546C140.059 42.99 140.674 40.428 141.358 37.885C141.674 36.704 142.288 36.288 143.473 36.506C144.776 36.746 146.164 36.94 146.85 38.37C146.946 38.571 147.172 38.724 147.366 38.861C148.61 39.752 148.614 40.968 148.311 42.291C147.76 44.703 147.233 47.12 146.688 49.533C145.596 54.369 144.282 59.135 142.26 63.682C142.048 64.165 141.993 64.719 141.808 65.469Z"
                fill="black"
              ></path>
              <path
                d="M115.315 90.3741C115.913 92.7851 115.352 94.8371 114.647 96.9001C113.272 100.917 111.692 104.839 109.624 108.553C109.317 109.103 108.948 109.617 108.591 110.175C106.163 109.987 103.794 110.057 102.091 107.882C100.829 106.268 100.732 105.089 101.609 103.144C103.279 99.4351 104.797 95.6561 106.359 91.8981C106.634 91.2361 106.804 90.5311 107.05 89.8551C107.698 88.0641 108.087 87.8451 109.868 88.2291C113.45 89.0001 113.45 89.0001 115.315 90.3741Z"
                fill="black"
              ></path>
              <path
                d="M142.858 103.827C141.477 103.947 140.307 104.139 139.139 104.133C136.707 104.119 134.553 101.671 134.787 99.167C134.875 98.227 135.178 97.291 135.488 96.39C136.715 92.842 137.98 89.322 138.584 85.58C139.07 82.564 140.246 81.965 143.105 82.99C144.138 83.359 145.13 83.839 145.779 84.881C146.361 85.82 147.152 86.628 147.746 87.363C146.821 93.161 145.323 98.598 142.858 103.827ZM141.942 102.875C141.932 102.992 141.922 103.11 141.915 103.229C141.954 103.174 142.02 103.122 142.022 103.065C142.026 103.003 141.972 102.938 141.942 102.875Z"
                fill="black"
              ></path>
              <path
                d="M82.239 99.639C80.661 99.499 79.382 99.506 78.159 99.248C76.194 98.835 74.6139 95.684 75.2569 93.631C75.6379 92.416 76.132 91.235 76.478 90.01C77.603 86.026 78.6749 82.027 79.7829 78.037C80.1249 76.814 80.488 75.696 81.828 75.017C83.947 73.945 85.935 74.667 86.64 76.881C87.38 79.204 86.994 81.491 86.452 83.718C85.761 86.566 85.4149 89.523 84.0849 92.195C84.3619 94.85 81.952 96.76 82.239 99.639Z"
                fill="black"
              ></path>
              <path
                d="M110.825 71.084C110.555 71.113 110.263 71.056 110.096 71.176C108.407 72.391 106.922 71.778 105.551 70.641C104.139 69.471 103.174 68.05 103.572 66.075C104.027 63.813 104.529 61.559 104.945 59.29C105.431 56.628 105.998 53.965 106.242 51.276C106.459 48.915 107.537 48.219 109.752 48.966C110.957 49.372 112.176 49.621 113.098 50.646C114.399 52.096 114.852 53.55 114.545 55.615C113.945 59.646 113.09 63.603 112.07 67.533C111.774 68.676 111.292 69.773 110.825 71.084Z"
                fill="black"
              ></path>
              <path
                d="M29.6628 97.127C29.0538 97.059 28.3948 96.811 27.8388 96.957C26.3758 97.34 25.4428 96.774 24.5518 95.678C23.5418 94.433 22.9468 93.131 23.2468 91.512C23.7858 88.616 24.2608 85.705 24.8858 82.826C25.5598 79.717 26.3548 76.634 27.1298 73.547C27.6918 71.305 29.4738 70.629 31.2548 72.123C33.0708 73.646 34.2628 75.403 33.6338 78.129C32.6028 82.608 31.9328 87.172 31.0868 91.695C30.9868 92.236 30.7098 92.742 30.5728 93.279C30.2668 94.49 29.9948 95.712 29.6628 97.127Z"
                fill="black"
              ></path>
              <path
                d="M149.825 8.36506C147.995 13.5131 146.27 18.5731 144.389 23.5751C143.356 26.3271 139.018 27.3001 136.752 25.4291C135.752 24.6031 135.547 23.8961 135.982 22.7171C137.916 17.4741 139.841 12.2271 141.8 6.99309C142.124 6.12709 142.21 4.92908 143.333 4.73808C144.616 4.51908 145.851 4.97209 146.882 5.78209C147.503 6.27109 148.027 6.88406 148.611 7.42106C148.903 7.68806 149.235 7.91006 149.825 8.36506Z"
                fill="black"
              ></path>
              <path
                d="M8.46604 24.099C6.98004 24.167 5.87605 24.327 4.79005 24.241C3.44005 24.134 2.48503 23.2819 1.70603 22.2009C1.01303 21.2379 1.21404 20.338 1.55604 19.281C2.63204 15.954 3.67105 12.609 4.52705 9.21996C5.01105 7.30096 5.12103 5.28497 5.36903 3.30797C5.56603 1.73297 6.36505 1.01995 7.87705 1.23995C9.52205 1.47895 10.8341 2.17097 11.5451 3.83697C12.2751 5.54897 12.867 7.21295 11.926 9.02395C11.854 9.16295 11.783 9.32796 11.789 9.47796C11.92 12.868 10.435 15.883 9.59605 19.049C9.15905 20.698 8.84704 22.379 8.46604 24.099Z"
                fill="black"
              ></path>
              <path
                d="M82.2708 56.719C81.2398 56.858 80.3878 56.842 79.6298 57.104C78.3778 57.535 77.4538 57.124 76.6548 56.239C75.5398 54.999 74.9708 53.719 75.5828 51.912C77.1898 47.153 78.2628 42.255 78.8328 37.254C78.9128 36.544 79.0598 35.837 79.2408 35.145C79.5548 33.938 80.3068 33.456 81.5198 33.613C84.2448 33.964 86.1588 36.695 85.6648 39.43C84.9848 43.186 84.4028 46.961 83.6938 50.711C83.3128 52.72 82.7548 54.697 82.2708 56.719Z"
                fill="black"
              ></path>
              <path
                d="M7.60279 107.088C6.34679 107.162 5.5558 106.785 5.0908 105.654C4.7368 104.791 4.07078 104.043 3.48578 103.289C2.33178 101.804 2.2648 100.262 3.0308 98.581C3.9218 96.625 4.7768 94.65 5.5698 92.652C6.1228 91.256 6.55579 89.811 7.01679 88.381C7.16279 87.928 7.21379 87.445 7.33079 86.983C7.77379 85.249 8.5338 84.391 9.6648 84.329C11.0538 84.252 12.7608 85.518 13.1258 87.064C14.2548 91.847 13.6008 96.364 10.9808 100.569C10.7078 101.01 10.6388 101.577 10.4648 102.083C10.3668 102.374 10.2908 102.685 10.1348 102.944C9.2958 104.346 8.43279 105.734 7.60279 107.088Z"
                fill="black"
              ></path>
              <path
                d="M28.5579 35.457C30.9369 34.317 32.9469 34.942 34.0289 37.084C35.3839 39.766 35.5128 39.787 34.9938 42.934C34.3318 46.944 33.4429 50.917 32.6289 54.901C32.5509 55.274 32.3929 55.758 32.1109 55.938C31.2519 56.488 31.2479 57.364 31.1849 58.204C30.3689 58.147 29.6769 58.067 28.9859 58.058C27.4879 58.035 26.9178 57.601 26.3258 56.222C25.7848 54.956 26.0559 53.706 26.2299 52.451C26.8589 47.95 27.5149 43.453 28.1459 38.952C28.3119 37.771 28.4269 36.584 28.5579 35.457Z"
                fill="black"
              ></path>
              <path
                d="M114.899 7.67801C113.784 12.809 112.727 17.677 111.684 22.47C110.725 22.741 109.776 22.97 108.852 23.278C107.248 23.811 106.096 22.954 104.993 22.04C104.011 21.226 103.429 20.16 103.905 18.864C105.426 14.721 105.913 10.354 106.768 6.06601C107.282 3.49601 107.768 3.198 110.321 3.698C112.063 4.039 113.311 5.07299 114.233 6.54599C114.522 7.00999 114.79 7.49101 114.899 7.67801Z"
                fill="black"
              ></path>
              <path
                d="M54.4378 63.111C53.8558 63.111 53.3908 63.082 52.9298 63.117C49.9998 63.332 47.9808 61.1211 48.4528 58.1871C48.5148 57.7961 48.6698 57.419 48.7868 57.039C50.0528 52.908 51.0058 48.708 51.5898 44.426C51.6538 43.951 51.7228 43.476 51.8188 43.007C52.2078 41.115 52.7228 40.877 54.6258 41.046C56.7628 41.235 58.8118 44.015 58.4168 46.016C57.8778 48.756 57.5338 51.539 56.8988 54.255C56.2818 56.886 55.3968 59.454 54.6388 62.052C54.5538 62.35 54.5218 62.664 54.4378 63.111Z"
                fill="black"
              ></path>
              <path
                d="M10.5169 53.2879C9.29995 54.7029 8.38996 56.2669 8.22996 58.1709C8.15596 59.0409 7.72395 59.455 6.85295 59.479C6.05795 59.499 5.26693 59.6 4.47193 59.613C2.04793 59.651 0.125963 57.2889 0.725963 54.9639C0.944963 54.1209 1.32995 53.318 1.65995 52.506C2.76695 49.77 3.86696 47.03 5.00996 44.308C5.41996 43.331 5.40295 41.9199 6.85395 41.7969C8.41595 41.6639 9.98294 41.9969 10.9729 43.2909C11.7849 44.3529 12.338 45.6309 12.889 46.8649C13.057 47.2389 12.953 47.838 12.772 48.243C12.129 49.681 11.3949 51.0779 10.7099 52.4979C10.5909 52.7479 10.552 53.035 10.476 53.306L10.5169 53.2879Z"
                fill="black"
              ></path>
              <path
                d="M60.8919 3.11896C60.4209 5.22596 59.9579 7.35097 59.4699 9.46997C58.7239 12.711 57.9759 15.951 57.1989 19.185C56.9939 20.04 56.7789 20.898 55.4759 20.508C55.0439 20.379 54.4719 20.83 53.9509 20.873C51.8319 21.05 50.2629 19.777 50.0659 17.679C49.9999 16.985 50.0699 16.242 50.2479 15.566C51.1369 12.181 52.1169 8.81997 52.9899 5.43197C53.3609 3.99097 54.2009 2.86196 55.0969 1.75696C55.9509 0.704955 57.1149 0.492976 58.2729 1.20398C59.1419 1.73598 59.9289 2.40596 60.8919 3.11896Z"
                fill="black"
              ></path>
              <path
                d="M32.0622 18.568C30.9982 18.568 30.2012 18.489 29.4252 18.588C28.4212 18.716 27.7572 18.316 27.1692 17.562C25.9522 16 25.5932 14.433 26.3802 12.469C27.7162 9.13599 28.8492 5.719 29.9722 2.307C30.3532 1.153 30.8742 0.0879904 32.0952 0.0119904C33.3492 -0.0660096 34.5422 0.375987 35.4132 1.53299C36.7902 3.36299 37.4272 5.18201 36.5052 7.47101C35.2842 10.5 34.2822 13.616 33.1362 16.677C32.8902 17.338 32.4372 17.921 32.0622 18.568Z"
                fill="black"
              ></path>
              <path
                d="M82.4332 24.1381C81.4762 24.2461 80.5192 24.2991 79.5852 24.4711C77.0972 24.9311 75.0562 22.8111 75.6652 20.3251C75.7962 19.7881 76.0792 19.2901 76.2762 18.7681C77.4302 15.7121 78.5902 12.6581 79.7292 9.59706C80.5002 7.52106 80.9012 7.28206 83.1162 7.73506C83.8932 7.89406 84.6692 8.07806 85.4362 8.27906C85.7392 8.35806 86.0221 8.51406 86.2741 8.61906C87.0711 10.1071 86.9302 11.5381 86.4112 13.0101C85.6412 15.1821 84.8782 17.3591 84.2122 19.5631C83.7592 21.0621 83.7022 22.6941 82.4332 24.1381Z"
                fill="black"
              ></path>
            </svg>
          </figure>
          <figure
            class="is-absolute is-hidden-mobile is-shape-primary"
            style="top: 10rem; right: 0rem; width: 20rem"
          >
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 338 277">
              <path
                d="M136.018 0.775024C143.338 0.998024 150.311 2.86002 157.217 4.90402C161.951 6.30502 166.533 8.21602 171.238 9.72702C177.683 11.799 184.205 13.642 190.654 15.704C198.047 18.067 205.496 20.302 212.734 23.077C219.181 25.549 225.818 26.16 232.576 26.624C242.613 27.313 252.408 29.541 262.14 31.958C267.613 33.318 273.015 35.013 278.376 36.777C286.159 39.338 292.769 43.771 298.435 49.705C300.869 52.253 303.482 54.662 306.224 56.875C310.91 60.658 314.185 65.568 317.597 70.391C317.999 70.957 318.31 71.699 318.861 72.031C323.925 75.085 326.72 80.024 329.47 84.928C331.605 88.738 333.45 92.72 335.236 96.711C335.974 98.361 336.533 100.215 336.629 102.006C336.979 108.465 337.936 114.881 337.352 121.411C336.889 126.604 336.916 131.868 337.11 137.086C337.676 152.284 335.641 167.235 333.401 182.2C331.815 192.802 330.878 203.502 329.278 214.101C328.417 219.807 327.28 225.578 325.321 230.976C323.759 235.279 321.196 239.409 318.317 243.006C311.585 251.42 303.104 257.68 292.893 261.414C288.381 263.064 283.952 265.016 279.332 266.275C273.076 267.98 266.711 269.338 260.33 270.509C250.605 272.292 240.844 273.878 231.07 275.381C220.672 276.98 210.306 277.306 199.939 274.719C194.33 273.32 188.527 272.723 182.869 271.504C166.828 268.049 151.043 263.651 135.754 257.669C130.918 255.776 126.25 253.478 122.199 249.956C118.49 246.731 113.928 244.469 110.316 241.155C103.357 234.766 96.6579 228.074 90.1249 221.245C84.3729 215.231 79.0449 208.814 73.4259 202.671C71.6229 200.7 69.3989 199.121 67.5219 197.212C61.8789 191.478 56.3579 185.624 50.6959 179.909C48.0139 177.202 45.0629 174.763 42.3439 172.091C39.7309 169.523 37.2799 166.791 34.7229 164.164C30.1899 159.507 25.8419 154.642 21.0319 150.288C14.4459 144.325 9.29194 137.288 4.85794 129.733C1.90494 124.702 0.404932 119.126 0.994932 113.109C1.35393 109.453 1.56894 105.873 3.02594 102.364C4.82294 98.043 7.59594 94.544 11.0199 91.581C16.4609 86.871 22.0179 82.28 27.7129 77.881C34.4159 72.703 41.2719 67.718 48.1519 62.774C53.0819 59.232 58.3649 56.157 63.1269 52.411C72.1059 45.348 81.2339 38.467 89.4079 30.405C96.0349 23.868 102.898 17.54 110.002 11.527C115.279 7.06004 121.135 3.23104 128.049 1.65704C130.639 1.07104 133.357 1.05302 136.018 0.775024ZM19.8459 102.8C15.5139 101.001 13.7579 101.522 12.1429 105.364C13.5239 105.867 14.8829 106.363 16.5709 106.978C16.7739 105.683 16.8949 104.912 16.9929 104.287C17.9989 103.763 18.9229 103.281 19.8479 102.799C21.2859 101.622 23.0749 100.717 23.4099 98.469C20.4119 98.883 20.4119 98.883 19.8459 102.8ZM118.352 15.815C117.153 17.925 116.342 19.402 117.231 21.328C119.746 19.487 119.773 19.382 118.352 15.815ZM36.2909 86.69C35.4119 88.799 34.8089 90.248 34.0939 91.961C37.8889 90.785 37.8889 90.785 36.2909 86.69ZM129.395 162.873C128.641 162.383 128.006 161.799 127.858 161.903C127.292 162.306 126.881 162.927 126.413 163.468C126.843 163.712 127.337 164.224 127.684 164.138C128.211 164.009 128.639 163.465 129.395 162.873ZM137.797 163.645C137.248 164.305 136.658 164.709 136.697 165.036C136.763 165.591 137.228 166.097 137.525 166.623C137.986 166.255 138.761 165.928 138.818 165.505C138.881 165.033 138.287 164.477 137.797 163.645ZM137.221 207.492C137.242 207.855 137.264 208.219 137.285 208.582C138.129 208.456 138.973 208.33 139.816 208.205C139.787 207.967 139.757 207.73 139.73 207.492C138.895 207.492 138.057 207.492 137.221 207.492ZM110.674 30.56C110.768 30.297 110.862 30.035 110.957 29.772C110.123 29.451 109.291 29.13 108.457 28.809C108.357 29.097 108.256 29.386 108.154 29.674C108.994 29.969 109.834 30.265 110.674 30.56ZM116.773 160.416C116.58 160.891 116.285 161.258 116.357 161.528C116.435 161.827 116.851 162.037 117.121 162.285C117.336 161.902 117.652 161.535 117.713 161.129C117.736 160.968 117.193 160.722 116.773 160.416ZM124.658 162.574C123.793 162.347 123.324 162.142 122.863 162.152C122.707 162.156 122.562 162.708 122.414 163.009C122.768 163.15 123.127 163.408 123.473 163.392C123.754 163.381 124.02 163.036 124.658 162.574ZM133.973 165.672C133.819 165.484 133.664 165.297 133.51 165.11C133.348 165.387 133.151 165.654 133.059 165.954C133.039 166.011 133.434 166.196 133.637 166.322C133.748 166.105 133.861 165.89 133.973 165.672ZM115.15 24.039C114.955 23.876 114.759 23.714 114.566 23.552C114.468 23.778 114.254 24.034 114.302 24.223C114.353 24.418 114.656 24.549 114.849 24.708C114.949 24.486 115.051 24.263 115.15 24.039Z"
                fill="black"
              ></path>
            </svg>
          </figure>
          <divider />
        </div>
      </section>
    </portal>
    <section class="container section is-small">
      <div class="columns">
        <div class="column is-8">
          <section
            v-if="fetchState.pending"
            class="hero is-white is-large is-halfheight"
          >
            <div class="hero-body">
              <b-loading
                v-model="fetchState.pending"
                :is-full-page="false"
                :can-cancel="true"
              ></b-loading>
            </div>
          </section>
          <list v-else :repositories="repositories" />
        </div>
        <div class="column is-4 pl-0">
          <NuxtChild />
        </div>
      </div>
    </section>
  </section>
</template>

<script lang="ts">
import {
  defineComponent,
  ref,
  useContext,
  useFetch,
  useMeta,
  useRouter,
} from "@nuxtjs/composition-api";
import Navbar from "~/components/Navbar.vue";
import List from "~/components/Repository/List.vue";
import Breadcrumbs from "~/components/Breadcrumbs.vue";
import Divider from "~/components/Divider.vue";

export default defineComponent({
  name: "Index",
  components: { Navbar, List, Breadcrumbs, Divider },
  head: {
    title: "Blog | Omegion",
  },
  setup() {
    const { $config, error, $axios } = useContext();
    const router = useRouter();

    const repositories = ref(null);
    const breadcrumbs = ref([
      {
        route: { name: "index" },
        name: "Blog",
      },
      {
        route: {},
        name: "Open Source",
      },
    ]);

    const { fetch, fetchState } = useFetch(async () => {
      await $axios
        .$get("/api/repositories")
        .then((data) => {
          repositories.value = data;
          router.push({
            name: "repositories-slug",
            params: { slug: data[0].name },
          });
        })
        .catch(() => {
          error({ statusCode: 500, message: "Could not fetch repositories." });
        });
    });

    useMeta({
      title: `Open Source Projects - ${$config.titlePostfix}`,
      meta: [
        {
          hid: "description",
          name: "description",
          content: `${$config.titlePostfix}`,
        },
        { name: "twitter:site", content: "@omegion" },
        { name: "twitter:creator", content: "@omegion" },
        {
          property: "og:site_name",
          content: $config.titlePostfix,
        },
        { property: "og:type", content: "website" },
        { property: "og:url", content: $config.baseUrl },
        { property: "og:locale", content: "en_US" },
        { property: "og:description", content: `${$config.titlePostfix}` },
      ],
    });

    fetch();

    return { repositories, breadcrumbs, fetchState };
  },
});
</script>
